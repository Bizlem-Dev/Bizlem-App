<style>
table {
    border-collapse: collapse;
	border:1px solid #ddd;
	width:1150px    
}

th, td {
    text-align: left;
    padding: 8px;
    border:1px solid #ddd;
    width:20px
}

tr:nth-child(even){background-color: #f2f2f2}
</style>


		<script>
		function setChildPath(path){
			document.getElementById('childPath').value = path;
			
			document.getElementById('addChildLoad').submit();
		}
		</script>
		
		<form id="addChildLoad" action="<%=request.getContextPath()%>/servlet/service/productselection.saveCatalog?id=<%=request.getParameter("id")%>&param=edit" method="post"  enctype="multipart/form-data">	
				<div class="tab-two" style="width: 100%; float: left; margin-bottom: 20px;">
                            <!--<ul class="nav nav-tabs" id="myTab1">
                                <li class="active"><a data-toggle="tab" href="#technical">Technical Attribute</a></li>
                                <li id="shortCatLi"><a data-toggle="tab" href="#commercial">Commercial Attribute</a></li>
                              
                            </ul>-->
					<input type="hidden" name="pathToAdd" value="<%=request.getParameter("catalogpath")%>">
					<input type="hidden" id="childPath" name="childPath" value="<%=request.getParameter("catalogpath")%>">
													<%
                                                       var newpath1=request.getParameter("catalogpath").split("/");
                                                       var mainnode1= currentNode.session.getRootNode().getNode("content").getNode("product").getNode("products");
                                                       for(var p=0;p<newpath1.length;p++){
                                                       mainnode1=mainnode1.getNode(newpath1[p]);
                                                       }
                                                       currentNode=mainnode1;
                                                      // out.print("currentNode-----"+currentNode);
                                                       %> 
                   <!--<div class="tab-content" id="myTab1Content">-->
                   <div class="" id="myTab1Content">
                           <div id="technical" class="tab-pane fade active in">
                            
												<div class="form-group" style="margin-bottom: 0px;">
                                    				<div class="" >
                                                                            
                                   					 <div id="attr-product11">
                                   					 <%
                                   					 var lengthNode = "";
                                   					 if(currentNode.hasNode("template")){
                                   					 if(currentNode.getNode("template").getNode("attr").hasNodes()){
                                   					 lengthNode = currentNode.getNode("template").getNode("attr").getNodes();
                                   					 lengthNode = lengthNode.length;
                                   					 }
                                   					 }else{
                                   					 lengthNode = "1";
                                   					 }
                                   					 %>
                                                                                <div class="row">
                                                                                <div><h2>Product Specification</h2></div>
                                                                                <div style="float:right"><a href="javascript:void(0)" onclick="deleteRowTemp('technicalList','commercialList')" <span id="" title="Remove Products" class="glyphicon glyphicon-minus btn btn-default"></span></a></div>
                                                                                <!--<div style="float:right"><a href="javascript:void(0)" onclick="loadAddTemplate('technicalList','commercialList')" <span id="" class="glyphicon glyphicon-plus btn btn-default"></span></a></div>-->
                                                                                <div style="float:right"><a href="javascript:void(0)" onclick="loadAddTemplate('technicalList','commercialList')" <span id="" title="Add Products" class="glyphicon glyphicon-plus btn btn-default"></span></a></div>
                                                                                <div style="float:right;margin-right:5%"><a href="javascript:void(0)" onclick="loadColTemplate('add','<%=lengthNode%>')">Add Attributes</a></div>
                                                                                <div style="overflow-x:auto;margin-top:4%">
                                                                                <table id="techAttr">
                                                                                <tbody id="technicalList">
                                                                                <% if (currentNode.hasNode("template")){%>
                                                                                <tr id="rowHeader"><td>Catalog No</td>
                                                                                 <% if (currentNode.hasNode("template") && currentNode.getNode("template").getNode("attr").hasNodes()) {
                                                                                        var attrNode = currentNode.getNode("template").getNode("attr");
                                                                                        //var attProp=attrNode.getProperties();
                                                                                        if (attrNode.hasNodes()) {
                                                                                            
                                                                                                var attrNodes = attrNode.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                for (var b = 0; b < attrNodes.length; b++) { 
                                                                                                
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("label").hasNode(attrNodes[b].label)){
                                                                                      var	labelname=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("label").getNode(attrNodes[b].label);
                                                                                      	%>
                                                                                                <td><label class="col-xs-2"><%=labelname.name%></label>
                                                                                                <input type="hidden" class="form-control" value="<%=labelname.id%>" name="labelId" id="labelId<%=b%>" data-required="false" >
                                                                                                </td>
                                                                                                
                                                                                 <%}}}}%>
                                                                                 <td><label class="col-xs-2">Attachment</label></td>
                                                                                 
                                                                                 <%--if (currentNode.hasNode("child")){%>
                                                                                 <!--<td><label class="col-xs-2">Add Child</label></td>-->
                                                                                 <%}--%>
                                                                                </tr>
                                                                              
                                                                             <tr id="rowType">
                                                                                 <td>
                                                                                 <label class="col-xs-2">Type</label>
                                                                                 </td>   
                                                                               <% if (currentNode.hasNode("template") && currentNode.getNode("template").getNode("attr").hasNodes()) {
                                                                                        var attrNode = currentNode.getNode("template").getNode("attr");
                                                                                          //var attProp=attrNode.getProperties();
                                                                                        if (attrNode.hasNodes()) {
                                                                                            
                                                                                                var attrNodes = attrNode.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                //out.print(attrNodes.length);
                                                                                                for (var z = 0; z < attrNodes.length; z++) { 
                                                                                             
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").hasNode(attrNodes[z].type)){
                                                                                    var	labelname=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").getNode(attrNodes[z].type);
                                                                                     // var	labelName=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("label").getNode(attrNodes[z].label);
                                                                                    //out.print(labelname.length);
                                                                                      %>
                                                                                     
                                                                                      <td>
                                                                                      <div class="">
                                                                                      <select  class="form-control" onchange="changeValue(this,this.id)" id="type<%=z%>" data-id="<%=z%>" name="type">
                                                                                            <%
                                                                                                
                                                                                                    var uomNode = currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type");
                                                                                                    if (uomNode.hasNodes()) {
                                                                                                        var uomNodes = uomNode.getNodes();
                                                                                                        for (var k = 0; k < uomNodes.length; k++) {
                                                                                            %>
                                                                                            <%if ((labelname.id).equals(uomNodes[k].id)) {%>
                                                                                            <option value="<%=uomNodes[k].id%>" selected><%=uomNodes[k].name%></option>
                                                                                            <%} else {%>
                                                                                                                                                                                    
                                                                                           <option value="<%=uomNodes[k].id%>" ><%=uomNodes[k].name%></option>
                                                                                            
                                                                                            <%}%>
                                                                                            <%}
                                                                                                    }
                                                                                                
                                                                                            %>

                                                                                        </select>
                                                                                      </div>
                                                                                      </td>
                                                                                     <%}}}}%>
                                                                                 <td>
                                                                                 
                                                                                 </td>
                                                              
                                                                             </tr>
                                                                                
                                                                            <tr id="rowUom">
                                                                                 <td>
                                                                                 <label class="col-xs-2">UOM</label>
                                                                                 </td>   
                                                                               <% if (currentNode.hasNode("template") && currentNode.getNode("template").getNode("attr").hasNodes()) {
                                                                                        var attrNode = currentNode.getNode("template").getNode("attr");
                                                                                          //var attProp=attrNode.getProperties();
                                                                                        if (attrNode.hasNodes()) {
                                                                                            
                                                                                                var attrNodes = attrNode.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                //out.print(attrNodes.length);
                                                                                                for (var z = 0; z < attrNodes.length; z++) { 
                                                                                             
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("uom").hasNode(attrNodes[z].uom)){
                                                                                    var	labelname=currentNode.session.getRootNode().getNode("content").getNode("uom").hasNode(attrNodes[z].uom);
                                                                                     // var	labelName=currentNode.session.getRootNode().getNode("content").getNode("uom").hasNode(attrNodes[z].id);
                                                                                    //out.print(labelname.length);
                                                                                      %>
                                                                                     
                                                                                      <td>
                                                                                      <div class="">
                                                                                      <select  class="form-control" name="uom">
                                                                                            <%
                                                                                                
                                                                                                    var uomNode = currentNode.session.getRootNode().getNode("content").getNode("uom");
                                                                                                    if (uomNode.hasNodes()) {
                                                                                                        var uomNodes = uomNode.getNodes();
                                                                                                        for (var k = 0; k < uomNodes.length; k++) {
                                                                                            %>
                                                                                            <option value="<%=uomNodes[k].id%>" ><%=uomNodes[k].description%></option>
                                                                                            
                                                                                            <%}
                                                                                                    }
                                                                                                
                                                                                            %>

                                                                                        </select>
                                                                                      </div>
                                                                                      </td>
                                                                                     <%}}}}%>
                                                                                 <td>
                                                                                 
                                                                                 </td>
                                                              
                                                                             </tr>
                                                                             
                                                                                    
                                                                                    
                                                                                    <%
                                                                                        if (currentNode.hasNode("child")){
                                                                                        var childs=currentNode.getNode("child").getNodes();
                                                                                        for(var j=0;j<childs.length;j++){%>
                                                                                         <tr>
                                                                                  <td>
                                                                                          
                                                                                    <div class=""> <input type="hidden" value="<%=childs[j].getName()%>" name="childProid"> <input type="text" name="catalog" class="form-control"  value="<%=childs[j].getNode("attr").getProperty("catalog")%>"></div>
                                                                                    </td>
                                                                                       <%
                                                                                     if (currentNode.hasNode("template") && currentNode.getNode("template").getNode("attr").hasNodes()) {
                                                                                        var attrNode = currentNode.getNode("template").getNode("attr");
                                                                                        //var attProp=attrNode.getProperties();
                                                                                        if (attrNode.hasNodes()) {
                                                                                            
                                                                                                var attrNodes = attrNode.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                //out.print(attrNodes.length);
                                                                                                for (var z = 0; z < attrNodes.length; z++) { 
                                                                                             
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").hasNode(attrNodes[z].type)){
                                                                                    var	labelname=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").getNode(attrNodes[z].type).getNodes();
                                                                                      var	labelName=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("label").getNode(attrNodes[z].label);
                                                                                    
                                                                                      %>
                                                                                      <td><%for(var m=0;m<labelname.length;m++){
                                                                                       
                                                                                      	%>
                                                                                               
                                                                                    <div class=""><input type="text" class="form-control" required name="<%=labelName.name%>_<%=labelname[m].placeholder%>" value="<%=childs[j].getNode("attr").getProperty(labelName.name+"_"+labelname[m].placeholder)%>" placeholder="<%=labelname[m].placeholder%>"></div>
                                                                                    
                                                                               
                                                                                 <%}%></td>
                                                                                  <%}%><%}}}%>
                                                                                  <td>
                                                                                  <span style="margin-bottom:15px" class="btn btn-success fileinput-button">
                    															  <span  class="glyphicon glyphicon-picture"></span>
                    																<input title="Upload Image" type="file" name="image" id="">
                															   	  </span>
                															   	  <span style="margin-bottom:15px" class="btn btn-success fileinput-button">
                    															  <span  class="glyphicon glyphicon-facetime-video"></span>
                    																<input title="Upload Video" type="file" name="video" id="">
                															   	  </span>
                															   	  <span style="margin-bottom:15px" class="btn btn-success fileinput-button">
                    															  <span  class="glyphicon glyphicon-file"></span>
                    																<input title="Upload Document" type="file" name="atta" id="">
                															   	  </span>
                															   	  </td>
                                                                                  
                                                                                  <!--<td><input type="button" value="Add Child"  name="addChild" id="addChild" onclick="setChildPath('<%=request.getParameter("catalogpath")%>/child/<%=childs[j].getNode("attr").getProperty("catalog")%>')" ></td>-->
                                                                                  </tr>
                                                                                  <%}}else{%>
                                                                                    <tr>
                                                                                  <td>
                                                                                     
                                                                                    <div class="">  <input type="hidden" value="0" name="childProid"> <input type="text" name="catalog"  value="0" class="form-control" ></div>
                                                                                    </td>
                                                                                 <% if (currentNode.hasNode("template") && currentNode.getNode("template").getNode("attr").hasNodes()) {
                                                                                        var attrNode = currentNode.getNode("template").getNode("attr");
                                                                                        //var attProp=attrNode.getProperties();
                                                                                        if (attrNode.hasNodes()) {
                                                                                            
                                                                                                var attrNodes = attrNode.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                //out.print(attrNodes.length);
                                                                                                for (var z = 0; z < attrNodes.length; z++) { 
                                                                                             
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").hasNode(attrNodes[z].type)){
                                                                                    var	labelname=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").getNode(attrNodes[z].type).getNodes();
                                                                                      var	labelName=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("label").getNode(attrNodes[z].label);
                                                                                    //out.print(labelname.length);
                                                                                      %>
                                                                                      <td><%for(var m=0;m<labelname.length;m++){
                                                                                      	%>
                                                                                                
                                                                                    <div class=""><input type="text" required class="form-control" name="<%=labelName.name%>_<%=labelname[m].placeholder%>" placeholder="<%=labelname[m].placeholder%>"></div>
                                                                                    
                                                                               
                                                                                 <%}%> </td><%}%><%}}}%>
                                                                                 <td>
                                                                                 <span style="margin-bottom:15px" class="btn btn-success fileinput-button">
                    															  <span  class="glyphicon glyphicon-picture"></span>
                    																<input title="Upload Image" type="file" name="image" id="">
                															   	  </span>
                															   	  <span style="margin-bottom:15px" class="btn btn-success fileinput-button">
                    															  <span  class="glyphicon glyphicon-facetime-video"></span>
                    																<input title="Upload Video" type="file" name="video" id="">
                															   	  </span>
                															   	  <span style="margin-bottom:15px" class="btn btn-success fileinput-button">
                    															  <span  class="glyphicon glyphicon-file"></span>
                    																<input title="Upload Document" type="file" name="atta" id="">
                															   	  </span>
                                                                                 </td>
                                                              
                                                                             </tr>
                                                                             <%}%>
                                                                             </tbody>
                                                                             <%}else{%>
                                                                             	
                                                                             	<tr id="rowHeader"><td><label class="col-xs-2">Catalog No</label></td>
                                                                             	<td><div class=""><input class="form-control" onkeypress="labelDetailsDWR1(this.title);" title="0"  id="label0" placeholder="enter label" type="text" style="border:none" name="label" ><input type="hidden" class="form-control" value="" name="labelId" id="labelId0" data-required="false" ><div id="suggestionLabel0"  style="z-index:1;position:absolute;background:white"><div class="searchterm" id="searchLabel0"></div></div></div></td>
                                                                             	<td><label class="col-xs-2">Attachment</label></td>
                                                                             	</tr>
                                                                             	
                                                                            <tr id="rowType">
                                                                                 <td>
                                                                                 <label class="col-xs-2">Type</label>
                                                                                 </td>   
                                                                                     
                                                                                      <td>
                                                                                      <div class="">
                                                                                      <select  class="form-control" onchange="changeValue(this,this.id)" id="type0" data-id="0" name="type">
                                                                                       <option value="-1" >Select Type</option>
                                                                                            <%
                                                                                                
                                                                                                    var uomNode = currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type");
                                                                                                    if (uomNode.hasNodes()) {
                                                                                                        var uomNodes = uomNode.getNodes();
                                                                                                        for (var k = 0; k < uomNodes.length; k++) {
                                                                                            %>
                                                                                           <option value="<%=uomNodes[k].id%>" ><%=uomNodes[k].name%></option>
                                                                                            
                                                                                    
                                                                                            <%}
                                                                                                    }
                                                                                                
                                                                                            %>

                                                                                        </select>
                                                                                      </div>
                                                                                      </td>
                                                                                    
                                                                                 <td>
                                                                                 
                                                                                 </td>
                                                              
                                                                             </tr>
                                                                                
                                                                            <tr id="rowUom">
                                                                                 <td>
                                                                                 <label class="col-xs-2">UOM</label>
                                                                                 </td>   
                                                                               <td>
                                                                                      <div class="">
                                                                                      <select  class="form-control" name="uom">
                                                                                            <%
                                                                                                
                                                                                                    var uomNode = currentNode.session.getRootNode().getNode("content").getNode("uom");
                                                                                                    if (uomNode.hasNodes()) {
                                                                                                        var uomNodes = uomNode.getNodes();
                                                                                                        for (var k = 0; k < uomNodes.length; k++) {
                                                                                            %>
                                                                                            <option value="<%=uomNodes[k].id%>" ><%=uomNodes[k].description%></option>
                                                                                            
                                                                                            <%}
                                                                                                    }
                                                                                                
                                                                                            %>

                                                                                        </select>
                                                                                      </div>
                                                                                      </td>
                                                                                    
                                                                                 <td>
                                                                                 
                                                                                 </td>
                                                              
                                                                             </tr>
                                                                             	
                                                                             <%}%>
																			 </table>
																			 </div>
                                                                       </div>
                                                                       
                                                                       
                                                             </div> 
												 </div>
                            </div>
                            </div>
                            <div id="commercial" style="display:none" class="tab-pane fade">
                             <div class="form-group" style="margin-bottom: 0px;">
                                    				<div class="" >
                                                                            
                                   					 <div id="attr-commercial">
                                                                                <div class="row">
                                                                                <div style="float:right"><a href="javascript:void(0)" onclick="deleteRowTemp('technicalList','commercialList')" <span id="" class="glyphicon glyphicon-minus btn btn-default"></span></a></div>
                                                                                <div style="float:right"><a href="javascript:void(0)" onclick="loadAddTemplate('technicalList','commercialList')" <span id="" class="glyphicon glyphicon-plus btn btn-default"></span></a></div>
                                                                                <table style="border:1px solid black;width:100%">
                                                                                <tbody id="commercialList">
                                                                                <tr>
                                                                                 <% if (currentNode.hasNode("template") && currentNode.getNode("template").hasNode("comm") && currentNode.getNode("template").getNode("comm").hasNodes()) {
                                                                                        var attrNodeComm = currentNode.getNode("template").getNode("comm");
                                                                                        //var attProp=attrNode.getProperties();
                                                                                        if (attrNodeComm.hasNodes()) {
                                                                                            
                                                                                                var attrNodesComm = attrNodeComm.getNodes();
                                                                                                //out.print(attrNodesComm);
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                for (var b = 0; b < attrNodesComm.length; b++) { 
                                                                                                //out.print(attrNodesComm[b].id);
                                                                                                //out.print(attrNodesComm[b].typeCom);
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("commercial").hasNode(attrNodesComm[b].id)){
                                                                                      var	commId=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("commercial").getNode(attrNodesComm[b].id);
                                                                                      	%>
                                                                                                <td class="col-xs-2"><label class="col-xs-4"><%=commId.name%></label></td>
                                                                                 <%}}}}%>
                                                                                 
                                                                                </tr>
                                                                               <%
                                                                                        if (currentNode.hasNode("child")){
                                                                                        var childs=currentNode.getNode("child").getNodes();
                                                                                        for(var j=0;j<childs.length;j++){%>
                                                                                <tr>
                                                                                 
                                                                                 <% if (currentNode.hasNode("template") && currentNode.getNode("template").hasNode("comm") && currentNode.getNode("template").getNode("comm").hasNodes()) {
                                                                                        var attrNodeCom = currentNode.getNode("template").getNode("comm");
                                                                                        //var attProp=attrNode.getProperties();
                                                                                        if (attrNodeCom.hasNodes()) {
                                                                                            
                                                                                                var attrNodesCom = attrNodeCom.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                //out.print(attrNodes.length);
                                                                                                for (var z = 0; z < attrNodesCom.length; z++) { 
                                                                                             
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").hasNode(attrNodesCom[z].typeCom)){
                                                                                    var	labelname=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").getNode(attrNodesCom[z].typeCom).getNodes();
                                                                                    var	commId=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("commercial").getNode(attrNodesComm[z].id);
                                                                                    //out.print(labelname.length);
                                                                                      %>
                                                                                      <td class="col-xs-2"><div class="row" style="margin-bottom: 15px;"><%for(var m=0;m<labelname.length;m++){
                                                                                      	%>
                                                                                                
                                                                                    <div class="col-xs-4"><input type="text" class="form-control" required name="<%=commId.name%>_<%=labelname[m].placeholder%>" value="<%=childs[j].getNode("comm").getProperty(commId.name+"_"+labelname[m].placeholder)%>" placeholder="<%=labelname[m].placeholder%>"></div>
                                                                                    
                                                                               
                                                                                 <%}%> </div></td><%}%><%}}}%>
                                                                             </tr>
                                                                             <%}}else{%>
                                                                              <tr>
                                                                                 
                                                                                 <% if (currentNode.hasNode("template") && currentNode.getNode("template").hasNode("comm") && currentNode.getNode("template").getNode("comm").hasNodes()) {
                                                                                        var attrNodeCom = currentNode.getNode("template").getNode("comm");
                                                                                        //var attProp=attrNode.getProperties();
                                                                                        if (attrNodeCom.hasNodes()) {
                                                                                            
                                                                                                var attrNodesCom = attrNodeCom.getNodes();
                                                                                                var s = 0;
                                                                                                //var counte = 0;
                                                                                                //out.print(attrNodes.length);
                                                                                                for (var z = 0; z < attrNodesCom.length; z++) { 
                                                                                             
                                                                                            if (currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").hasNode(attrNodesCom[z].typeCom)){
                                                                                    var	labelname=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type").getNode(attrNodesCom[z].typeCom).getNodes();
                                                                                    var	commId=currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("commercial").getNode(attrNodesComm[z].id);
                                                                                    //out.print(labelname.length);
                                                                                      %>
                                                                                      <td class="col-xs-2"><div class="row" style="margin-bottom: 15px;"><%for(var m=0;m<labelname.length;m++){
                                                                                      	%>
                                                                                                
                                                                                    <div class="col-xs-4"><input type="text" class="form-control" required name="<%=commId.name%>_<%=labelname[m].placeholder%>" placeholder="<%=labelname[m].placeholder%>"></div>
                                                                                    
                                                                               
                                                                                 <%}%> </div></td><%}%><%}}}%>
                                                                             </tr>
                                                                             <%}%>
                                                                             </tbody>
																			 </table>
                                                                       </div>
                                                                       
                                                                       
                                                             </div> 
												 </div>
                            </div>
                            </div>
                            
                            </div>
                    </div>
                                                                                      <div id="attrUom" style="display:none" class="">
                                                                                      <select  class="form-control" name="uom">
                                                                                            <%
                                                                                                
                                                                                                    var uomNode = currentNode.session.getRootNode().getNode("content").getNode("uom");
                                                                                                    if (uomNode.hasNodes()) {
                                                                                                        var uomNodes = uomNode.getNodes();
                                                                                                        for (var k = 0; k < uomNodes.length; k++) {
                                                                                            %>
                                                                                            <option value="<%=uomNodes[k].id%>" ><%=uomNodes[k].description%></option>
                                                                                            
                                                                                            <%}
                                                                                                    }
                                                                                                
                                                                                            %>

                                                                                        </select>
                                                                                      </div>
							
			 <script>
			
					 
			 
			// var templatePart="<tr><td><div class='row' style='margin-bottom: 15px;'><div class='col-xs-2'>  <input type='text' class='form-control' > </td><% if (currentNode.hasNode('template') && currentNode.getNode('template').getNode('attr').hasNodes()) { var attrNode = currentNode.getNode('template').getNode('attr');       if (attrNode.hasNodes()) {  var attrNodes = attrNode.getNodes();     var s = 0;  for (var z = 0; z < attrNodes.length; z++) {  if (currentNode.session.getRootNode().getNode('content').getNode('attribute').getNode('type').hasNode(attrNodes[z].type)){       var	labelname=currentNode.session.getRootNode().getNode('content').getNode('attribute').getNode('type').getNode(attrNodes[z].type).getNodes();  %>	  <%for(var m=0;m<labelname.length;m++){ %>  <td><div class='col-xs-2'><input type='text' class='form-control' name='<%=labelname[m].placeholder%>' placeholder='<%=labelname[m].placeholder%>'></div>   <%}%> </div></td><%}%><%}}}%>   <td><input type='file' name='image' id=''> </br><input type='file' name='video' id=''> </br> <input type='file' name='atta' id=''></td> </tr>";
			
		//alert(templatePart);
	function deleteColTemp(obj) {
			try {
			var lenVal= $(obj).closest("td").index();
  //  alert(lenVal);
		//	alert(cellIndex);
			var row = document.getElementById("rowHeader");
			    row.deleteCell(lenVal);
			    var rowType1 = document.getElementById("rowType");
			    rowType1.deleteCell(lenVal);
			    var rowUom1 = document.getElementById("rowUom");
			    rowUom1.deleteCell(lenVal);
			  //  var rowValue1 = document.getElementById("rowValue");
			   // rowValue1.deleteCell(lenVal);
			   var xv = document.getElementById("technicalList").rows.length;
                            for(var m = 0;m<xv;m++){
                            if(m > 2){
                            document.getElementById("technicalList").rows[m].deleteCell(lenVal);
                            
                            }
                            }
                            var xWidth = $("#techAttr").width();
							//alert("before---"+xWidth);
							xWidth = xWidth - 52;
							//alert("after---"+xWidth);
							$("#techAttr").width(xWidth+'px');
							//alert("final---"+$("#techAttr").width());
			} catch (e) {
			alert(e);
			}
	}
	
		var iLabelCount = 0;
		var val = 0;
		var inc = 20;
		function loadColTemplate(param,lenVal){
			//var vWidth = document.getElementById("techAttr").style.offsetWidth;
			//var vHeight = document.getElementById("techAttr").style.offsetHeight;
			//alert("width---"+$("#techAttr").width());
			
			var xv = document.getElementById("rowHeader").cells.length;
			var xdata = document.getElementById("rowHeader").cells[xv - 1].innerHTML;
					if(lenVal != ""){
			
			var catalog = "1";
			if($(xdata).html() == "Attachment"){
			var val = xv - 1;
			//alert("if--"+val);
			}else if($(xdata).html() == "Add Child"){
			var val = xv - 2;
			//alert("if else--"+val);
			}
			var rowHead = document.getElementById("rowHeader");
			var x1 = rowHead.insertCell(val);
			iLabelCount = iLabelCount + 1;
			x1.innerHTML = '<div class=""><input class="form-control" onkeypress="labelDetailsDWR1(this.title);" title="'+inc+'"  id="label'+inc+'" placeholder="enter label" type="text" style="border:none" name="label" ><input type="hidden" class="form-control" value="" name="labelId" id="labelId'+inc+'" data-required="false" ><div id="suggestionLabel'+inc+'"  style="z-index:1;position:absolute;background:white"><div class="searchterm" id="searchLabel'+inc+'"></div></div></div><div class="col-xs-2"><a onclick="deleteColTemp(this)"><span style="cursor:pointer" title="Remove Attributes" class="glyphicon glyphicon-remove"></span></a></div>';
			var rowType = document.getElementById("rowType");
			var xType = rowType.insertCell(val);
			xType.innerHTML = '<div id="attrType" class="" style="display:block"><select  class="form-control" onchange="changeValue(this,this.id)" data-id="'+inc+'" id="type'+inc+'" name="type"><option value="-1" >Select Type</option><%var uomNode = currentNode.session.getRootNode().getNode("content").getNode("attribute").getNode("type");if (uomNode.hasNodes()) {var uomNodes = uomNode.getNodes();for (var k = 0; k < uomNodes.length; k++) {%><option value="<%=uomNodes[k].id%>" ><%=uomNodes[k].name%></option><%}}%></select></div>'
			var rowUom = document.getElementById("rowUom");
			var xUom = rowUom.insertCell(val);
			xUom.innerHTML = '<div class="">'+document.getElementById("attrUom").innerHTML+'</div>';
			//var rowValue = document.getElementById("rowValue");
			//var xUom = rowValue.insertCell(val);
			var xv = document.getElementById("technicalList").rows.length;
                            for(var m = 0;m<xv;m++){
                            if(m > 2){
                            document.getElementById("technicalList").rows[m].insertCell(val);
                            }
                            }
			inc++;
			var xWidth = $("#techAttr").width();
			//alert("before---"+xWidth);
			xWidth = xWidth + 52;
			//alert("after---"+xWidth);
			$("#techAttr").width(xWidth+'px');
			//alert("final---"+$("#techAttr").width());
			}
			
						
			}	
			
			
				function deleteRowTemp(guestList,commList) {
		try {
			var table = document.getElementById(guestList);
			var rowCount = table.rows.length;
			if (rowCount > 3) {
				table.deleteRow(rowCount - 1);
			}
			var table1 = document.getElementById(commList);
			var rowCount1 = table1.rows.length;
			if (rowCount1 > 3) {
				table1.deleteRow(rowCount1 - 1);
			}
		} catch (e) {
			alert(e);
		}
	}
		
						
			
			function changeValue(obj,id){
			var res = document.getElementById(id).value;
			//alert(id);
			//alert(document.getElementById(id).value);
			//alert(document.getElementById(obj.id).value);
			var lenValC = $(obj).closest('td').index();
    		//alert(lenValC);
     		var lenValR = $(obj).closest('tr').index();
    		//alert(lenVal);
    		//var xData = document.getElementById("rowHeader").rows[lenValR + 1].cells[lenValC].;
			//var xdata = document.getElementById("rowHeader").cells[xv - 1].innerHTML;
			var xv = document.getElementById("technicalList").rows.length;
			//alert(xv);
			var idM = $(obj).attr('data-id');
			//alert(idM);
			var labelId = document.getElementById("labelId"+idM).value;
			//alert(labelId);
			$.ajax({
                            url: 'http://35.221.160.146:8082/portal/servlet/service/productselection.getTypeInfo',
                            data: {
                            typeId:res,
                            labelId:labelId
                            },
                            async:false,
                            success: function(data) {
                            var xv = document.getElementById("technicalList").rows.length;
                            if(xv == 3){
                            var table = document.getElementById("technicalList");
							var rowCount = table.rows.length;
							//alert(rowCount);
							row = table.insertRow(rowCount);
							var cell1 = row.insertCell(0);
							cell1.innerHTML = '<div class=""><input type="text" required="" class="form-control" name="catalog" placeholder="catalog number"></div>';
							var cell2 = row.insertCell(lenValC);
							cell2.innerHTML = data;
								cellL = row.insertCell(row.cells.length);
								cellL.innerHTML = '<span style="margin-bottom:15px" class="btn btn-success fileinput-button"><span class="glyphicon glyphicon-picture"></span><input title="Upload Image" type="file" name="image" id=""></span><span style="margin-bottom:15px" class="btn btn-success fileinput-button"><span class="glyphicon glyphicon-facetime-video"></span><input title="Upload Video" type="file" name="video" id=""></span><span style="margin-bottom:15px" class="btn btn-success fileinput-button"><span class="glyphicon glyphicon-file"></span><input title="Upload Document" type="file" name="atta" id=""></span>';
                            }
                            for(var m = 0;m<xv;m++){
                            if(m > 2){
                            document.getElementById("technicalList").rows[m].cells[lenValC].innerHTML = data;
                            }
                            }
            					//document.getElementById("technicalList").rows[3].cells[lenValC].innerHTML = data;                    
                            }
                        });
			
			
			}
			
			function changeValue1(obj,id){
			//alert(id);
			//alert(document.getElementById(id).value);
			//alert(document.getElementById(obj.id).value);
			var res = document.getElementById(id).value;
			var lenValC = $(obj).closest('td').index();
    		//alert(lenVal);
     		var lenValR = $(obj).closest('tr').index();
    		//alert(lenVal);
    		//var xData = document.getElementById("rowHeader").rows[lenValR + 1].cells[lenValC].;
			//var xdata = document.getElementById("rowHeader").cells[xv - 1].innerHTML;
			var xv = document.getElementById("technicalList").rows.length;
			//alert(xv);
			//alert(document.getElementById("technicalList").rows[3].cells[lenValC].innerHTML);
			$.ajax({
                            url: 'http://35.221.160.146:8082/portal/servlet/service/productselection.getTypeInfo',
                            data: {
                            typeId:res,
                            },
                            async:false,
                            success: function(data) {
                            var xv = document.getElementById("technicalList").rows.length;
                            for(var m = 0;m<xv;m++){
                            if(m > 2){
                            document.getElementById("technicalList").rows[m].cells[lenValC].innerHTML = data;
                            }
                            }
            					//document.getElementById("technicalList").rows[3].cells[lenValC].innerHTML = data;                    
                            }
                        });
			
			}
			var row = "";
		function loadAddTemplate(tableID,tableID1){
			
				var table = document.getElementById(tableID);
				var rowCount = table.rows.length;
				//alert(rowCount);
				row = table.insertRow(rowCount);
				var cell2 = row.insertCell(0);
				cell2.innerHTML = '<div class=""><input type="text" required="" class="form-control" name="catalog" placeholder="catalog number"></div>';

			var x = document.getElementsByName("type").length;
			//alert(x);
			
			for(var i=0;i<x;i++){
			//alert("for---"+document.getElementsByName("type")[i].value);
				if(document.getElementsByName("type")[i].value != -1)
				{
					
					var res = document.getElementsByName("type")[i].value;
					var labelId = document.getElementsByName("labelId")[i].value;
				//	alert("if---"+res);
					$.ajax({
                            url: 'http://35.221.160.146:8082/portal/servlet/service/productselection.getTypeInfo',
                            data: {
                            typeId:res,
                            labelId:labelId
                            },
                            async:false,
                            success: function(data) {
                           // alert("success---"+data);
                            cellD = row.insertCell(i+1);
                            cellD.innerHTML = data;
                            }
                        });
					
				}else{
				//alert("else---");
				cellD = row.insertCell(i+1);
				}
			}
				
				//alert(row.cells.length);
			//	x = x + 1;
				cellL = row.insertCell(row.cells.length);
				cellL.innerHTML = '<span style="margin-bottom:15px" class="btn btn-success fileinput-button"><span class="glyphicon glyphicon-picture"></span><input title="Upload Image" type="file" name="image" id=""></span><span style="margin-bottom:15px" class="btn btn-success fileinput-button"><span class="glyphicon glyphicon-facetime-video"></span><input title="Upload Video" type="file" name="video" id=""></span><span style="margin-bottom:15px" class="btn btn-success fileinput-button"><span class="glyphicon glyphicon-file"></span><input title="Upload Document" type="file" name="atta" id=""></span>';									

			
			}
			
					 
		
			</script>
			 <div class="col-xs-12">


                                                                <input type="submit" class="btn btn-primary"
                                                                       value="Save" />

				<%if(currentNode.hasNode("template")){%>
                                                                        <a href="<%=request.getContextPath()%>/servlet/service/productselection.downloadtemp?id=<%=request.getParameter("id")%>&param=edit&catalogpath=<%=request.getParameter("catalogpath")%>"  class="btn btn-primary"  download>Download Template</a>
                                                                        <!--<a href="<%=request.getContextPath()%>/servlet/service/productselection.downloadtemp?pid=<%=request.getParameter("id")%>" onclick="saveNDownload()" class="btn btn-primary" download>Save & Download Template</a>-->
                                                                        <a data-target="#userPic" data-toggle="modal" href="#" class="btn btn-primary">Upload Template</a><%}%>
                                                                      <%

                                                                            if (request.getAttribute("error") != null && !request.getAttribute("error").equals("no session")) {
                                                                               var errorvalue=request.getAttribute("error");
                                                                              %> 
                                                                          
                                                                          <span class="error"><%=errorvalue%></span>
                                                                               
																		<%	}
			

                                                                        %>
				
				
				
                                                            </div>
			
			</form>
			 <div class="modal fade" id="userPic" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-xs">
                                        <div class="modal-content">
                                            <form method="POST" action="<%=request.getContextPath()%>/servlet/service/productselection.uploadTemplate?id=<%=request.getParameter("id")%>&param=edit&catalogpath=<%=request.getParameter("catalogpath")%>" enctype="multipart/form-data">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                    <h4 class="modal-title" id="loginModalLabel">Upload File</h4>
                                                </div>
                                                <div class="modal-body" style="height:50px;">
                                                   
                                                    <div class="form-group">
                                                        <label class="col-sm-3 control-label">File</label>
                                                        <div class="col-sm-9">
                                                            <input class="form-control" type="file" name="uploadtemplate" id="uploadtemplate" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="submit" class="btn btn-primary">Upload</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>	 											